esp32_ble_server:
  id: ble
  manufacturer_data: [0x72, 0x4, 0x00, 0x23]
  manufacturer: ESPHome
  model: Test
  services:
    - uuid: 2a24b789-7aab-4535-af3e-ee76a35cc42d
      num_handles: 14
      advertise: false
      characteristics:
        - uuid: cad48e28-7fbe-41cf-bae9-d77a6c233423
          properties:
            - read
          value: [0, 1, 2]
    - uuid: 2a24b789-7a1b-4535-af3e-ee76a35cc42d
      advertise: false
      characteristics:
        - id: test_change_characteristic
          uuid: 2a24b789-7a1b-4535-af3e-ee76a35cc11d
          properties:
            - read
          value: "Initial"
        - uuid: 2a24b789-7a1b-4535-af3e-ee76a35cc12d
          properties:
            - read
            - write
          on_write:
            then:
              - lambda: |-
                  ESP_LOGD("BLE", "Received: %s", x.c_str());
              - ble_server.characteristic_set_value:
                  id: test_change_characteristic
                  value: !lambda 'return "Echo " + x + "";'
